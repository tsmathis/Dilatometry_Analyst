# Dilatometry Analyst Documentation

***Installer for current release can be found in the "Releases" tab to the right -->***
<br/>

## *Quick Start Guide*

After launching Dilatometry Analyst, you'll see an empty data window which will show different previews of your processed data
once your data is imported.

**Data Import**: This application was designed to process data generated with an El-Cell ECD-3-nano electrochemical dilatometer[^1] used in conjunction with a BioLogic potentiostat. Dilatometry Analyst assumes your data is in the form of .txt files that were generated by BioLogic's EC-Lab software[^2], see below for instructions for exporting data from EC-lab.

***To successfully import data***, your files should at minimum have data columns for time, potential, current, cycle number, and displacement. The application also expects that your data files are numbered in the order that the measurements were performed, *e.g.*, file_name_01, file_name_02, file_name_03, *etc*. This is mainly for the normalization process, see the *Data Processing and Exported Data* section for further details.

**Data export**: Dilatometry Analyst will export three Excel files containing your processed data. The numbering for the sheets in the Excel files correspond to the numbers of the files you imported, *i.e.*, Sheet_01 corresponds to file_name_01, Sheet_02 corresponds to file_name_02, *etc*.
<br/>
<br/>

## *Data Processing and Exported Data*

*A recent Open Access review paper, which has engineers from El-Cell amoungst its authors, is available for a thorough discussion and review of the collection and intrepretation of electrochemical dilatometry data.*[^3]

Dilatometry Analyst primarily serves as tool for automating some simple, albiet tedious, data processing procedures. The main processes are as follows:

1. *Normalization of displacement data to the first data point in the first loaded file*  
        
   Since dilatometers only record relative displacement values, an initial displacement value (*h*<sub>0</sub>) needs to be defined. A safe bet for this is to set the first data point recored in your experiment as zero, which is what Dilatometry Analyst does:  

   <p align=center>Normalized displacement = <i>h<sub>n</sub></i> - <i>h<sub>0</sub></i> (<i>eq.</i> 1)</p>

   where, *h<sub>0</sub>* is the first displacement value recorded in the experiment and *h<sub>n</sub>* is the displacemnet recorded at each point.  
     
   If you would like to normalize your data to another value that makes sense for your experiment/conditions, you can do this after exporting your processed data. Simply add (or subtract) your value to/from the "Normalized Displacement" column in the exported data. The important thing is to clearly state in your Methods or Experimental Details how you defined *h*<sub>0</sub> so that your results can be reliably compared against different literature sources
   <br/>
   <br/>
2. *Per-cycle displacement change*
     
   Normalization is additionally performed on a per-cycle basis, taking the first point of each cycle as the zero point for each respective cycle:  
     
   <p align=center>Per cycle displacement change = <i>h<sub>n, c</sub></i> - <i>h<sub>0, c</sub></i> (<i>eq.</i> 2)</p>
     
   where, *h<sub>0, c</sub>* is the first displacement value recorded in cycle *c* and *h<sub>n, c</sub>* is the displacemnet recorded at each point in cycle *c*.
   <br/>
   <br/>
3. *Displacement change as a percentage*
     
   The displacment can also be expressed as a percentage, which is sometimes referred to as "Relative Strain (%)" in the literature:
     
   <p align=center>Percent displacement change = (<i>h<sub>n</sub></i> - <i>h<sub>0</sub></i>) / <i>h<sub>0</sub></i> * <i>100</i> (<i>eq.</i> 3)</p>
     
   A similar calculation is performed to get the per-cycle percentage change in displacement.
   <br/>
   <br/>
4. *Baseline subtraction for **qualitative** intrepretation and comparison of dilatometry data from different systems (electrodes, electrolytes, etc.)*
     
   While it is important to not disregard irreversible changes (and their causes) occurring in the displacement over time, any drift in the signal can make comparison of cycle-to-cycle behavior difficult. If we make an assumption that the *reversible* behavior/mechanism for an electrochemical system in the dilatometer should at least be self-consistent on a cycle-to-cycle basis, it is not unreasonable to treat the drift in the system as a baseline and subtract it. Doing so will allow for at least a qualitative look at the cycle-to-cycle evolution of the displacment behavior. Dilatometry Analyst takes the 2nd to 2nd-to-last cycles (to avoid artifacts that arise when changing techniques/scanning rates) to fit your data with a simple 3rd degree polynomial to find the baseline. A low order polynomial works well to account for any minor oscillations while avoiding over-fitting. Averaging the displacement data and reporting the standard error will further aid in the interpretation of your data.
   <br/>
   <br/>
   *If your choice of data presentation is the displacement data following baseline subtraction, you **must** also report the un-corrected displacement data as a Supplementary Figure at minimum to ensure full transparency.*
   <br/>
   <br/>
5. *Averaging displacment and electrochemical data and calculating standard error*
     
   The data for the 2nd to 2nd-to-last cycle which had its the baseline removed is then averaged by Dilatometry Analyst, along with the error (plotted as the shaded regions in the preview plots), and is displayed in the "Averaged Data Preview" tab. Averaging is also performed on your electrochemical data as well.
   <br/>
   <br/>
   When looking at Displacment vs. Potential curves, it is not uncommon for the data to crossover itself (this is quite common for porous carbon electrodes in supercapacitor systems, see ref. 3 for examples and citations to further examples in the literature[^3]). If there were still significant oscillations in your displacement data following baseline subtraction, this can lead to some unexpected grapical representatoins of the shaded error region in the data preview window for the Displacment vs. Potential curves. Plotting your error as simple error bars should mitigate this issue. If the problem persists, the best represention of your data will be your Displacement vs. Time.

<br/>
<br/>
As Dilatomery Analyst is not a full-fledged data visualization tool, the preview plots shown in the application interface should only be considered a sanity check for you as the user to ensure normalizatiom and baseline subtraction occurred as you expected. These plots can be saved directly using the plot controls in the application interface. Plotting the exported data using your plotting software of choice is the best option to get high quality, customized plots of your processed data.

<br/>
<br/>

## *Exporting .txt files from EC-Lab*

If you have never exported your data as .txt files from EC-Lab, the "Text File Export" dialog can be found under Experiment->Export as Text..., or by using the shortcut Ctrl+T. Selecting "Custom*" in the Template menu will allow you to choose what data (referred to as "Variables" in EC-Lab) will be included in your .txt file. You can choose to export all, or just the required data. Dilatometry Analyst requires the following columns, or "Variables": 'time/s', 'Ewe/V', '\<I>/ma', 'cycle number', and 'Analog IN 1/V'. 'Analog IN 1/V' is how EC-Lab referes to the displacement data that was recorded by the El-Cell dilatometer.
<br/>
<br/>

## *Directly Recording Signals from External Devices with EC-Lab*

In order for EC-Lab to properly record the input signals from the dilatometer, it is important to load the experiment settings for the dilatometer in the "External Devices" menu of EC-Lab ***before*** starting your experiment. An example is shown here, but it is recommended to consult the dilatometer manual provided by El-Cell for further instruction.[^4]

If you do not have a BioLogic branded potentiostat, your system likely has a similar process for recording signals from external devices with your potentiostat, so it is best to consult your instrument's user manual.

If you cannot directly record the input signals from your dilatometer using EC-Lab, it is still possible to use Dilatometry Analyst to process your data. However, you will have to perform some extra work to successfully join your electrochemical data to your dilatometry data prior to use. See the "*How to Externally Combine Electrochemical and Dilatometry Data*" section at the bottom of this page.
<br/>
<br/>

## *How to Combine Electrochemical and Dilatometry Data after your Experiment has Finished*

*Note: The EC-Link software from El-Cell allows for recording potential, current, and there is a mention of a method of distinguishing between cycles in the documentaion for EC-Link. So it may be possible to directly generate files with EC-Link that are compatible with Dilatometry Analyst, but this has not been tested at this point.*

If it is not possible for you to directly record signals from your dilatometer using EC-Lab, or your non-BioLogic branded potentiostat's software, the data recorded using El-Cell's software (EC-Link[^5]) can still be joined with your electrochemical data. This will first require you to match the data sampling rates of your potentiostat's software with the EC-Link software as closely as you can. 

Unfortunately, you will have to stop and restart the EC-Link software before changing electrochemical techniques, *e.g.*, changing the scan rate or the C-rate, to ensure you will have individual dilatometry data files corresponding to your electrochemical measurements.

The next step relies on the fact that EC-Link automatically records your system time during measurements. It is also possible to export data from EC-Lab in the "Text File Export" dialog with the elasped time in your measurements being expressed in system time (absolute time).

From here, you will have to perform a database-style inner join on your electrochemical and dilatometry data files using the system time as the field name to join on. The Pandas library from Python has a convienent funciton for this (pandas.merge_asof[^6]) that will join your data files on the *nearest* key, instead of on exact matches. This will help to minimize the amount of data lost in the join due to any differences in the sampling rates of EC-Lab (or your pontentiostat's software) and EC-Link. You will need then need to convert the system time, or absolute time, into elapsed time (in units of seconds). At this point your files will be compatible with Dilatometry Analyst.
<br/>
<br/>

## *References and External Links*

[^1]: [ECD-3-nano Dilatometer](https://el-cell.com/products/test-cells/electrochemical-dilatometer/ecd-3-nano-aqu/)
[^2]: [BioLogic EC-Lab](https://www.biologic.net/support-software/ec-lab-software/)
[^3]: [A Practical Guide for Using Electrochemical Dilatometry as Operando Tool in Battery and Supercapacitor Research](https://onlinelibrary.wiley.com/doi/full/10.1002/ente.202101120)
[^4]: [El-Cell manuals](https://el-cell.com/support/manuals/)
[^5]: [EC-Link software](https://el-cell.com/support/el-cell-software/ec-link/)
[^6]: [Pandas merge_asof documentation](https://pandas.pydata.org/docs/reference/api/pandas.merge_asof.html)

